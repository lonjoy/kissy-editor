/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: Aug 13 21:43
*/
KISSY.add("node/anim-plugin",function(e,b,j,g,l){function n(f,w,o,k,i,p,x){if(w==="toggle"){i=b.css(f,c)===d?1:0;w="show"}if(i)b.css(f,c,b.data(f,c)||"");var m={},v={};e.each(A[w],function(q){if(q===h){m[h]=b.css(f,h);b.css(f,h,y)}else if(q===s){m[s]=b.css(f,s);v.opacity=i?1:0;i&&b.css(f,s,0)}else if(q===r){m[r]=b.css(f,r);v.height=i?b.css(f,r)||f.naturalHeight:0;i&&b.css(f,r,0)}else if(q===t){m[t]=b.css(f,t);v.width=i?b.css(f,t)||f.naturalWidth:0;i&&b.css(f,t,0)}});return(new j(f,v,o,p||"easeOut",
function(){if(!i){var q=f.style,z=q[c];if(z!==d){z&&b.data(f,c,z);q[c]=d}m[r]&&b.css(f,{height:m[r]});m[t]&&b.css(f,{width:m[t]});m[s]&&b.css(f,{opacity:m[s]});m[h]&&b.css(f,{overflow:m[h]})}k&&e.isFunction(k)&&k()},x)).run()}var u=g.prototype,a="ksAnims"+e.now(),c="display",d="none",h="overflow",y="hidden",s="opacity",r="height",t="width",A={show:[h,s,r,t],fade:[s],slide:[h,r]};g.__ANIM_KEY=a;(function(f){function w(o,k){var i=b.data(o,a);i||b.data(o,a,i=[]);k.on("complete",function(){var p=b.data(o,
a);if(p){var x=e.indexOf(k,p);x>=0&&p.splice(x,1);p.length||b.removeData(o,a)}});i.push(k)}f.animate=function(){var o=e.makeArray(arguments);e.each(this,function(k){var i=j.apply(l,[k].concat(o)).run();w(k,i)});return this};f.stop=function(o){e.each(this,function(k){var i=b.data(k,a);if(i){e.each(i,function(p){p.stop(o)});b.removeData(k,a)}});return this};e.each({show:["show",1],hide:["show",0],toggle:["toggle"],fadeIn:["fade",1],fadeOut:["fade",0],slideDown:["slide",1],slideUp:["slide",0]},function(o,
k){f[k]=function(i,p,x,m){if(b[k]&&!i)b[k](this);else{if(m===l)m=false;e.each(this,function(v){var q=n(v,o[0],i,p,o[1],x,m);w(v,q)})}return this}})})(u)},{requires:["dom","anim","./base"]});
KISSY.add("node/attach",function(e,b,j,g,l){function n(c,d,h){h.unshift(d);c=b[c].apply(b,h);if(c===l)return d;return c}var u=g.prototype,a=e.makeArray;e.each(["equals","contains","scrollTop","scrollLeft","height","width","addStyleSheet","appendTo","prependTo","insertBefore","before","after","insertAfter","test","hasClass","addClass","removeClass","replaceClass","toggleClass","removeAttr","hasAttr","hasProp","toggle","scrollIntoView","remove","removeData","hasData","unselectable"],function(c){u[c]=
function(){var d=a(arguments);return n(c,this,d)}});e.each(["filter","first","parent","closest","next","prev","siblings","children"],function(c){u[c]=function(){var d=a(arguments);d.unshift(this);d=b[c].apply(b,d);d=d===l?this:d===null?null:new g(d);return d}});e.each({attr:1,text:0,css:1,val:0,prop:1,offset:0,html:0,data:1},function(c,d){u[d]=function(){var h=a(arguments);if(h[c]===l&&!e.isObject(h[0])){h.unshift(this);h=b[d].apply(b,h)}else h=n(d,this,h);return h}});e.each(["on","detach","fire",
"delegate","undelegate"],function(c){u[c]=function(){var d=a(arguments);d.unshift(this);return j[c].apply(j,d)}})},{requires:["dom","event","./base"]});
KISSY.add("node/base",function(e,b,j){function g(a,c,d){if(!(this instanceof g))return new g(a,c,d);if(a)if(e.isString(a)){a=b.create(a,c,d);if(a.nodeType===b.DOCUMENT_FRAGMENT_NODE){l.push.apply(this,n(a.childNodes));return j}}else if(e.isArray(a)||u(a)){l.push.apply(this,n(a));return j}else a=a;else return j;this[0]=a;this.length=1;return j}var l=Array.prototype,n=e.makeArray,u=b._isNodeList;e.augment(g,{length:0,item:function(a){return e.isNumber(a)?a>=this.length?null:new g(this[a]):new g(a)},
add:function(a,c,d){if(e.isNumber(c)){d=c;c=j}a=g.all(a,c).getDOMNodes();c=new g(this);if(d===j)l.push.apply(c,a);else{d=[d,0];d.push.apply(d,a);l.splice.apply(c,d)}return c},slice:function(a,c){return new g(l.slice.call(this,a,c))},getDOMNodes:function(){return l.slice.call(this)},each:function(a,c){var d=this.length,h=0,y;for(y=new g(this[0]);h<d&&a.call(c||y,y,h,this)!==false;y=new g(this[++h]));return this},getDOMNode:function(){return this[0]},all:function(a){if(this.length>0)return g.all(a,
this);return new g},one:function(a){a=this.all(a);return a.length?a.slice(0,1):null}});e.mix(g,{ELEMENT_NODE:b.ELEMENT_NODE,ATTRIBUTE_NODE:b.ATTRIBUTE_NODE,TEXT_NODE:b.TEXT_NODE,CDATA_SECTION_NODE:b.CDATA_SECTION_NODE,ENTITY_REFERENCE_NODE:b.ENTITY_REFERENCE_NODE,ENTITY_NODE:b.ENTITY_NODE,PROCESSING_INSTRUCTION_NODE:b.PROCESSING_INSTRUCTION_NODE,COMMENT_NODE:b.COMMENT_NODE,DOCUMENT_NODE:b.DOCUMENT_NODE,DOCUMENT_TYPE_NODE:b.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT_NODE:b.DOCUMENT_FRAGMENT_NODE,NOTATION_NODE:b.NOTATION_NODE,
all:function(a,c){if(e.isString(a)&&(a=e.trim(a))&&a.length>=3&&e.startsWith(a,"<")&&e.endsWith(a,">")){if(c){if(c.getDOMNode)c=c.getDOMNode();if(c.ownerDocument)c=c.ownerDocument}return new g(a,j,c)}return new g(b.query(a,c))},one:function(a,c){var d=g.all(a,c);return d.length?d.slice(0,1):null}});return g},{requires:["dom"]});
KISSY.add("node/override",function(e,b,j,g){e.each(["append","prepend","before","after"],function(l){g.prototype[l]=function(n){n=n;if(e.isString(n))n=b.create(n);n&&b[l](n,this);return this}})},{requires:["dom","event","./base","./attach"]});KISSY.add("node",function(e,b,j){j.KeyCodes=b.KeyCodes;return j},{requires:["event","node/base","node/attach","node/override","node/anim-plugin"]});
